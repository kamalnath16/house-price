{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Header Section -->
            <div class="text-center mb-5">
                <h1 class="display-4 text-white fw-bold mb-3">
                    <i class="fas fa-home me-3"></i>AI House Price Predictor
                </h1>
                <p class="lead text-white-50 fs-4">Get accurate price predictions using advanced machine learning</p>
                
                {% if not model_loaded %}
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Warning:</strong> Model not loaded. Predictions may not work properly.
                </div>
                {% endif %}
            </div>

            <!-- Main Form Card -->
            <div class="card shadow-lg border-0" style="background: rgba(255, 255, 255, 0.98); border-radius: 20px;">
                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <h2 class="text-primary fw-bold">
                            <i class="fas fa-edit me-2"></i>Property Details
                        </h2>
                        <p class="text-muted">Fill in the details below to get your prediction</p>
                    </div>

                    <form method="POST" action="/predict" id="predictionForm">
                        <div class="row g-4">
                            <!-- Area Input -->
                            <div class="col-md-6">
                                <label for="area" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-ruler-combined text-primary me-2"></i>Area (sq ft)
                                </label>
                                <input type="number" class="form-control" id="area" name="area" 
                                       min="500" max="20000" value="2000" required 
                                       style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                <div class="form-text text-muted">
                                    <i class="fas fa-info-circle me-1"></i>Enter area between 500-20,000 sq ft
                                </div>
                            </div>

                            <!-- Bedrooms -->
                            <div class="col-md-6">
                                <label for="bedrooms" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-bed text-primary me-2"></i>Bedrooms
                                </label>
                                <select class="form-select" id="bedrooms" name="bedrooms" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="1">1 Bedroom</option>
                                    <option value="2">2 Bedrooms</option>
                                    <option value="3" selected>3 Bedrooms</option>
                                    <option value="4">4 Bedrooms</option>
                                    <option value="5">5 Bedrooms</option>
                                    <option value="6">6 Bedrooms</option>
                                </select>
                            </div>

                            <!-- Bathrooms -->
                            <div class="col-md-6">
                                <label for="bathrooms" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-bath text-primary me-2"></i>Bathrooms
                                </label>
                                <select class="form-select" id="bathrooms" name="bathrooms" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="1">1 Bathroom</option>
                                    <option value="2" selected>2 Bathrooms</option>
                                    <option value="3">3 Bathrooms</option>
                                    <option value="4">4 Bathrooms</option>
                                </select>
                            </div>

                            <!-- Stories -->
                            <div class="col-md-6">
                                <label for="stories" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-building text-primary me-2"></i>Stories
                                </label>
                                <select class="form-select" id="stories" name="stories" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="1">1 Story</option>
                                    <option value="2" selected>2 Stories</option>
                                    <option value="3">3 Stories</option>
                                    <option value="4">4 Stories</option>
                                </select>
                            </div>

                            <!-- Parking -->
                            <div class="col-md-6">
                                <label for="parking" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-car text-primary me-2"></i>Parking Spaces
                                </label>
                                <select class="form-select" id="parking" name="parking" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="0">No Parking</option>
                                    <option value="1">1 Space</option>
                                    <option value="2" selected>2 Spaces</option>
                                    <option value="3">3 Spaces</option>
                                    <option value="4">4 Spaces</option>
                                    <option value="5">5+ Spaces</option>
                                </select>
                            </div>

                            <!-- Features Section Header -->
                            <div class="col-12 mt-4">
                                <h4 class="text-primary fw-semibold mb-3">
                                    <i class="fas fa-star me-2"></i>Property Features
                                </h4>
                            </div>

                            <!-- Main Road -->
                            <div class="col-md-6">
                                <label for="mainroad" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-road text-primary me-2"></i>Main Road Access
                                </label>
                                <select class="form-select" id="mainroad" name="mainroad" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="yes" selected>Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>

                            <!-- Guest Room -->
                            <div class="col-md-6">
                                <label for="guestroom" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-users text-primary me-2"></i>Guest Room
                                </label>
                                <select class="form-select" id="guestroom" name="guestroom" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <!-- Basement -->
                            <div class="col-md-6">
                                <label for="basement" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-warehouse text-primary me-2"></i>Basement
                                </label>
                                <select class="form-select" id="basement" name="basement" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <!-- Air Conditioning -->
                            <div class="col-md-6">
                                <label for="airconditioning" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-snowflake text-primary me-2"></i>Air Conditioning
                                </label>
                                <select class="form-select" id="airconditioning" name="airconditioning" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="yes" selected>Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>

                            <!-- Hot Water Heating -->
                            <div class="col-md-6">
                                <label for="hotwaterheating" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-fire text-primary me-2"></i>Hot Water Heating
                                </label>
                                <select class="form-select" id="hotwaterheating" name="hotwaterheating" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <!-- Preferred Area -->
                            <div class="col-md-6">
                                <label for="prefarea" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-map-marker-alt text-primary me-2"></i>Preferred Area
                                </label>
                                <select class="form-select" id="prefarea" name="prefarea" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <!-- Furnishing Status -->
                            <div class="col-md-6">
                                <label for="furnishingstatus" class="form-label fw-semibold text-dark">
                                    <i class="fas fa-couch text-primary me-2"></i>Furnishing Status
                                </label>
                                <select class="form-select" id="furnishingstatus" name="furnishingstatus" required
                                        style="color: #333; background-color: #fff; border: 2px solid #e9ecef;">
                                    <option value="furnished">Furnished</option>
                                    <option value="semi-furnished" selected>Semi-Furnished</option>
                                    <option value="unfurnished">Unfurnished</option>
                                </select>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center mt-5">
                            <button type="submit" class="btn btn-primary btn-lg px-5 py-3" 
                                    style="border-radius: 15px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;"
                                    {% if not model_loaded %}disabled{% endif %}>
                                <i class="fas fa-magic me-2"></i>Predict House Price
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info Cards -->
            <div class="row mt-5">
                <div class="col-md-4 mb-3">
                    <div class="card h-100 text-center border-0 shadow" style="background: rgba(255,255,255,0.9);">
                        <div class="card-body p-4">
                            <i class="fas fa-brain fa-3x text-primary mb-3"></i>
                            <h5 class="fw-bold text-dark">AI Powered</h5>
                            <p class="text-muted">Advanced machine learning algorithms for accurate predictions</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card h-100 text-center border-0 shadow" style="background: rgba(255,255,255,0.9);">
                        <div class="card-body p-4">
                            <i class="fas fa-chart-line fa-3x text-success mb-3"></i>
                            <h5 class="fw-bold text-dark">Real Market Data</h5>
                            <p class="text-muted">Trained on thousands of real estate transactions</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card h-100 text-center border-0 shadow" style="background: rgba(255,255,255,0.9);">
                        <div class="card-body p-4">
                            <i class="fas fa-clock fa-3x text-warning mb-3"></i>
                            <h5 class="fw-bold text-dark">Instant Results</h5>
                            <p class="text-muted">Get your house price prediction in seconds</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add custom styles to fix visibility -->
<style>
/* Fix form visibility issues */
.form-control, .form-select {
    color: #333 !important;
    background-color: #fff !important;
    border: 2px solid #e9ecef !important;
    border-radius: 8px !important;
}

.form-control:focus, .form-select:focus {
    border-color: #0d6efd !important;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25) !important;
}

.form-label {
    color: #333 !important;
    font-weight: 600 !important;
    margin-bottom: 8px !important;
}

.form-text {
    color: #6c757d !important;
}

/* Ensure all text is visible */
input, select, option, label {
    color: #333 !important;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    border: none !important;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Form validation
    const form = document.getElementById('predictionForm');
    if (form) {
        form.addEventListener('submit', function(e) {
            const area = document.getElementById('area').value;
            if (area < 500 || area > 20000) {
                e.preventDefault();
                alert('Please enter an area between 500 and 20,000 sq ft');
                return;
            }
        });
    }
});
</script>
{% endblock %}
